# 🧪 LMS-ESID 完整功能測試指南

> **測試環境**: http://localhost:3000  
> **測試時間**: 約90分鐘  
> **最後更新**: 2025-08-18

## 📋 當前系統功能清單

### ✅ 已完成功能 (Phase 3A-1)

#### 🔐 用戶認證與權限系統
- **角色管理**: Admin、Head Teacher (HT)、Teacher (LT/IT/KCFS)
- **登入/登出功能**
- **角色權限控制** (Row Level Security)
- **權限差異化介面**

#### 👥 學生管理功能 (57位學生)
- **學生列表查看** (支援分頁、搜尋、篩選)
- **學生資料管理** (姓名、學號、年級、軌別、班級)
- **批量學生操作** (分配班級、年級升級)
- **未分配學生查詢** (按年段、校區篩選)
- **學生統計數據** (各年段課程分佈)

#### 🏫 班級與課程管理
- **班級管理** (G1-G6, E1/E2/E3 分級系統)
- **三軌課程架構**:
  - **LT English Language Arts** (本地教師)
  - **IT English Language Arts** (國際教師)  
  - **KCFS** (康橋未來技能課程)
- **教師課程指派** (自動課程建立)
- **學生課程關聯** (批量分配)

#### 📊 成績管理系統
- **評量代碼系統**: FA1-FA8 (形成性), SA1-SA4 (總結性), FINAL (期末)
- **智能成績計算引擎**: 
  - Formative Average = avg(FA>0)
  - Summative Average = avg(SA>0)  
  - Semester Grade = (F×0.15 + S×0.2 + Final×0.1) ÷ 0.45
- **成績輸入介面** (支援快速輸入)
- **批量成績匯入** (CSV 格式)
- **成績歷史追蹤**

#### 🎯 Assessment Title 管理 (HT專用功能)
- **評量顯示名稱自定義** (不影響計算邏輯)
- **三層優先序系統**: Class > Grade×Track > Default
- **權限控制** (僅 admin 和 head teacher 可管理)
- **即時名稱更新** (UI自動反映變更)

#### 📈 Analytics 儀表板 (Phase 3A-1 完成)
- **學生成績聚合視圖** (student_grade_aggregates):
  - 個人平均分計算
  - At-risk 學生識別
  - 成績趨勢分析
- **班級統計分析** (class_statistics):
  - 班級平均分、中位數、標準差
  - 完成率統計
  - 軌別比較分析
- **教師績效監控** (teacher_performance):
  - 教學負荷統計
  - 學生表現分布
  - 跨教師類型比較
- **即時數據更新** (2分鐘自動刷新)
- **效能最佳化** (平均查詢時間 146ms)

#### 🔔 Real-time 通知系統
- **智能通知觸發**:
  - 考試逾期通知 (exam_overdue)
  - 完成率低警告 (low_completion)
  - 出席率低通知 (attendance_low)
  - 系統更新通知 (system_updates)
- **通知優先級管理** (urgent/high/medium/low)
- **角色篩選通知** (按權限自動過濾)
- **通知中心介面** (彈出式設計)

---

## 🧪 完整測試流程 (7階段)

### Phase 1: 基礎登入與導航測試 ⏱️ 10分鐘

#### 步驟 1.1: 系統訪問測試
1. **首頁載入**:
   - 打開 `http://localhost:3000`
   - ✅ 檢查: 頁面是否在3秒內完全載入
   - ✅ 檢查: 是否顯示 LMS-ESID 標題
   - ✅ 檢查: 登入按鈕是否可見

2. **響應式設計**:
   - 調整瀏覽器視窗大小 (手機/平板/桌面)
   - ✅ 檢查: 佈局是否自動適應
   - ✅ 檢查: 文字是否清晰可讀

#### 步驟 1.2: 用戶登入測試
**測試帳號** (基於現有種子資料):
- **Admin**: `admin@school.edu`
- **Head Teacher (G4 Local)**: `head.g4.local@school.edu`
- **Head Teacher (G4 International)**: `head.g4.intl@school.edu`
- **Head Teacher (G6 Local)**: `head.g6.local@school.edu`
- **Local Teacher**: `teacher.lt.1@school.edu`
- **International Teacher**: `teacher.it.1@school.edu`
- **KCFS Teacher**: `teacher.kcfs.1@school.edu`

**測試流程**:
1. 點擊「登入」按鈕
2. 嘗試用不同角色登入
3. ✅ 檢查: 登入成功後的歡迎訊息
4. ✅ 檢查: 不同角色看到的選單項目差異

#### 步驟 1.3: 導航功能測試
1. **主要導航測試**:
   - ✅ 檢查: 頂部導航選單項目
   - ✅ 檢查: 側邊欄選單 (如果有)
   - ✅ 檢查: 每個連結都能正常跳轉

2. **權限驗證**:
   - Admin: 應該看到所有選單項目
   - Head Teacher: 應該看到管理功能
   - Teacher: 應該只看到教學相關功能

3. **登出測試**:
   - ✅ 檢查: 登出按鈕位置明確
   - ✅ 檢查: 登出後返回首頁

---

### Phase 2: 學生與班級管理測試 ⏱️ 15分鐘

#### 步驟 2.1: 學生管理功能
1. **學生列表查看**:
   - 前往「學生管理」頁面
   - ✅ 檢查: 應該顯示 57 位學生
   - ✅ 檢查: 學生資料完整 (姓名、學號、年級、軌別)
   - ✅ 檢查: 分頁功能正常

2. **搜尋與篩選**:
   - 測試學生姓名搜尋
   - 測試按年級篩選 (G1-G6)
   - 測試按軌別篩選 (local/international)
   - ✅ 檢查: 篩選結果正確

3. **學生詳細資料**:
   - 點擊任一學生查看詳情
   - ✅ 檢查: 顯示完整學生資訊
   - ✅ 檢查: 關聯的班級和課程資訊

#### 步驟 2.2: 班級管理功能
1. **班級列表**:
   - 前往「班級管理」頁面
   - ✅ 檢查: 班級按年級排序顯示
   - ✅ 檢查: 班級名稱格式 (如 "G4 Trailblazers")
   - ✅ 檢查: 學生數統計正確

2. **班級詳細資訊**:
   - 點擊任一班級查看詳情
   - ✅ 檢查: 班級學生列表
   - ✅ 檢查: 班級課程配置
   - ✅ 檢查: 指派教師資訊

#### 步驟 2.3: 課程管理功能
1. **課程列表查看**:
   - 前往「課程管理」頁面
   - ✅ 檢查: 三種課程類型都存在 (LT/IT/KCFS)
   - ✅ 檢查: 每個班級都有對應課程

2. **教師指派**:
   - 查看教師課程分配
   - ✅ 檢查: LT教師教授LT課程
   - ✅ 檢查: IT教師教授IT課程
   - ✅ 檢查: KCFS教師教授KCFS課程

---

### Phase 3: 成績管理與計算測試 ⏱️ 20分鐘

#### 步驟 3.1: 成績輸入介面
1. **成績輸入頁面**:
   - 以 Teacher 身份登入
   - 前往「成績管理」或「成績輸入」
   - 選擇一個您有權限的班級/課程
   - ✅ 檢查: 學生列表正確顯示
   - ✅ 檢查: 評量代碼選項 (FA1-FA8, SA1-SA4, FINAL)

2. **成績輸入測試**:
   - 選擇評量代碼 (建議從 FA1 開始)
   - 為幾位學生輸入測試分數:
     - 學生A: 85 分
     - 學生B: 92 分  
     - 學生C: 78 分
   - ✅ 檢查: 成績儲存成功提示
   - ✅ 檢查: 頁面重新載入後成績仍在

#### 步驟 3.2: 成績計算驗證
**建議測試數據** (為同一學生輸入完整成績):
- **形成性評量**: FA1=85, FA2=90, FA3=88
- **總結性評量**: SA1=92, SA2=87
- **期末評量**: FINAL=89

**預期計算結果**:
- Formative Average = (85+90+88)/3 = **87.67**
- Summative Average = (92+87)/2 = **89.5**
- Semester Grade = (87.67×0.15 + 89.5×0.2 + 89×0.1) ÷ 0.45 = **88.67**

**驗證步驟**:
1. 輸入上述完整成績組合
2. 前往學生成績查看或 Analytics 頁面
3. ✅ 檢查: Formative Average 顯示 87.67
4. ✅ 檢查: Summative Average 顯示 89.5
5. ✅ 檢查: Semester Grade 顯示 88.67
6. ✅ 檢查: 計算邏輯正確

#### 步驟 3.3: 邊界條件測試
1. **零分處理**:
   - 輸入 0 分成績
   - ✅ 檢查: 0 分是否被排除在平均分計算外

2. **部分成績**:
   - 只輸入部分 FA 成績 (如只有 FA1, FA3)
   - ✅ 檢查: 平均分只計算有效成績

3. **空成績處理**:
   - 學生完全沒有成績時
   - ✅ 檢查: 平均分顯示為 null 或 "-"

---

### Phase 4: Analytics 儀表板測試 ⏱️ 15分鐘

#### 步驟 4.1: 學生成績分析
1. **Analytics 頁面訪問**:
   - 前往「Analytics」或「分析報告」頁面
   - ✅ 檢查: 頁面在 2 秒內載入完成
   - ✅ 檢查: 無 JavaScript 錯誤

2. **學生成績聚合數據**:
   - 查看學生成績總覽
   - ✅ 檢查: 顯示學生總數 (應為 57)
   - ✅ 檢查: At-risk 學生統計
   - ✅ 檢查: 平均成績分布圖表

3. **個別學生分析**:
   - 點擊任一學生查看詳細分析
   - ✅ 檢查: 個人成績趨勢圖
   - ✅ 檢查: 各評量類型表現
   - ✅ 檢查: 風險評估結果

#### 步驟 4.2: 班級統計分析
1. **班級統計頁面**:
   - 切換到班級統計視圖
   - ✅ 檢查: 所有班級數據載入
   - ✅ 檢查: 班級平均分計算正確

2. **統計指標驗證**:
   - ✅ 檢查: 班級平均分 (class_average)
   - ✅ 檢查: 班級中位數 (class_median)
   - ✅ 檢查: 標準差 (class_stddev)
   - ✅ 檢查: 完成率百分比 (completion_rate_percent)

3. **軌別比較分析**:
   - ✅ 檢查: Local vs International 軌別對比
   - ✅ 檢查: 各年級表現比較
   - ✅ 檢查: 圖表數據一致性

#### 步驟 4.3: 教師績效監控
1. **教師績效頁面**:
   - 前往教師績效分析
   - ✅ 檢查: 顯示教師總數 (應為 9)
   - ✅ 檢查: 按教師類型分組 (LT/IT/KCFS)

2. **績效指標檢驗**:
   - ✅ 檢查: 授課班級數 (classes_taught)
   - ✅ 檢查: 教學學生總數 (total_students_taught)
   - ✅ 檢查: 整體班級平均分 (overall_class_average)
   - ✅ 檢查: 高分學生比例 (students_above_80_percent)

3. **教師比較分析**:
   - ✅ 檢查: 不同教師類型的表現對比
   - ✅ 檢查: 教學負荷分布合理性
   - ✅ 檢查: At-risk 學生分布

#### 步驟 4.4: 效能測試
1. **載入速度測試**:
   - 記錄各 Analytics 頁面載入時間
   - ✅ 目標: 所有查詢在 500ms 內完成
   - ✅ 目標: 頁面總載入時間 < 2秒

2. **數據刷新測試**:
   - 修改一個學生成績
   - 刷新 Analytics 頁面
   - ✅ 檢查: 數據即時更新

---

### Phase 5: Assessment Title 管理測試 ⏱️ 10分鐘

#### 步驟 5.1: 權限驗證
1. **Head Teacher 登入**:
   - 使用 Head Teacher 帳號登入
   - 前往「Assessment Title 管理」頁面
   - ✅ 檢查: Head Teacher 可以存取

2. **Teacher 權限測試**:
   - 切換到 Teacher 帳號
   - 嘗試存取 Assessment Title 管理
   - ✅ 檢查: Teacher 應該被拒絕存取

#### 步驟 5.2: 評量名稱自定義
1. **Default 層級設定**:
   - 選擇 FA1 評量代碼
   - 設定 Default 顯示名稱: "Formative Assessment 1"
   - ✅ 檢查: 設定成功儲存

2. **Grade×Track 層級設定**:
   - 選擇 G4 + Local 組合
   - 設定 FA1 顯示名稱: "G4 Local Reading Test"
   - ✅ 檢查: 覆寫 Default 設定

3. **Class 層級設定**:
   - 選擇特定班級 (如 "G4 Trailblazers")
   - 設定 FA1 顯示名稱: "4A Special Assessment"
   - ✅ 檢查: 最高優先權生效

#### 步驟 5.3: 顯示名稱驗證
1. **成績輸入頁面驗證**:
   - 回到成績輸入頁面
   - 選擇對應的班級和評量
   - ✅ 檢查: 顯示自定義的評量名稱
   - ✅ 檢查: 不同班級顯示不同名稱

2. **優先序測試**:
   - 測試 Class > Grade×Track > Default 優先順序
   - ✅ 檢查: 優先序邏輯正確執行

---

### Phase 6: 通知系統測試 ⏱️ 10分鐘

#### 步驟 6.1: 通知中心介面
1. **通知區域查找**:
   - 登入後尋找通知圖示/區域
   - ✅ 檢查: 通知中心位置明確可見
   - ✅ 檢查: 未讀通知數量顯示

2. **通知列表**:
   - 點擊通知中心
   - ✅ 檢查: 通知列表正確顯示
   - ✅ 檢查: 通知按時間排序

#### 步驟 6.2: 通知觸發測試
1. **系統狀態通知**:
   - 查看是否有系統自動生成的通知
   - ✅ 檢查: 系統更新通知
   - ✅ 檢查: 維護通知 (如果有)

2. **角色篩選驗證**:
   - 切換不同角色登入
   - ✅ 檢查: Admin 看到全域通知
   - ✅ 檢查: Teacher 只看到相關通知
   - ✅ 檢查: Head Teacher 看到管理通知

#### 步驟 6.3: 通知互動功能
1. **標記已讀**:
   - 點擊未讀通知
   - ✅ 檢查: 通知狀態更新為已讀
   - ✅ 檢查: 未讀數量相應減少

2. **通知優先級**:
   - ✅ 檢查: 緊急通知 (urgent) 顯示不同顏色
   - ✅ 檢查: 高優先級通知置頂顯示

---

### Phase 7: 系統整合與效能測試 ⏱️ 10分鐘

#### 步驟 7.1: 完整業務流程測試
1. **端到端流程**:
   - **步驟1**: 新增一位測試學生
   - **步驟2**: 分配到班級和課程
   - **步驟3**: 輸入完整成績組合
   - **步驟4**: 檢查 Analytics 數據更新
   - **步驟5**: 驗證通知系統響應

2. **跨功能驗證**:
   - ✅ 檢查: 各功能模組之間數據一致
   - ✅ 檢查: 實時數據同步

#### 步驟 7.2: 系統效能測試
1. **載入速度基準**:
   - 首頁載入: < 2 秒
   - 學生列表: < 3 秒
   - Analytics 頁面: < 2 秒
   - 成績輸入: < 2 秒

2. **大量數據測試**:
   - 載入所有 57 位學生數據
   - ✅ 檢查: 無顯著延遲
   - ✅ 檢查: 分頁功能正常

#### 步驟 7.3: 安全性驗證
1. **RLS 政策測試**:
   - Teacher 嘗試查看其他班級數據
   - ✅ 檢查: 系統正確阻止非授權存取
   - ✅ 檢查: 錯誤訊息友善明確

2. **角色權限邊界**:
   - 測試各角色的功能邊界
   - ✅ 檢查: 權限控制嚴格執行
   - ✅ 檢查: 無權限洩漏

---

## 📝 測試記錄模板

### 測試執行記錄表

| 測試階段 | 功能項目 | 狀態 | 問題描述 | 嚴重程度 | 建議改善 |
|---------|---------|------|----------|----------|----------|
| Phase 1 | 登入功能 | ✅/❌ |  | High/Medium/Low |  |
| Phase 1 | 權限控制 | ✅/❌ |  | High/Medium/Low |  |
| Phase 2 | 學生管理 | ✅/❌ |  | High/Medium/Low |  |
| Phase 2 | 班級管理 | ✅/❌ |  | High/Medium/Low |  |
| Phase 3 | 成績輸入 | ✅/❌ |  | High/Medium/Low |  |
| Phase 3 | 成績計算 | ✅/❌ |  | High/Medium/Low |  |
| Phase 4 | Analytics | ✅/❌ |  | High/Medium/Low |  |
| Phase 5 | Assessment Title | ✅/❌ |  | High/Medium/Low |  |
| Phase 6 | 通知系統 | ✅/❌ |  | High/Medium/Low |  |
| Phase 7 | 系統整合 | ✅/❌ |  | High/Medium/Low |  |

### 效能測試記錄

| 頁面/功能 | 載入時間 | 目標時間 | 狀態 | 備註 |
|----------|----------|----------|------|------|
| 首頁 | ___ 秒 | < 2 秒 | ✅/❌ |  |
| 學生列表 | ___ 秒 | < 3 秒 | ✅/❌ |  |
| Analytics | ___ 秒 | < 2 秒 | ✅/❌ |  |
| 成績輸入 | ___ 秒 | < 2 秒 | ✅/❌ |  |

### 整體系統評分

| 評估項目 | 分數 (1-5) | 說明 |
|----------|------------|------|
| 功能完整性 | ___ / 5 | 所有必要功能是否都能正常運作 |
| 使用者體驗 | ___ / 5 | 介面直觀性和易用性 |
| 系統效能 | ___ / 5 | 載入速度和響應時間 |
| 數據準確性 | ___ / 5 | 計算結果和數據一致性 |
| 安全性 | ___ / 5 | 權限控制和數據保護 |

### 下一步建議

**優先修復項目**:
1. [ ] _______________
2. [ ] _______________
3. [ ] _______________

**功能改善建議**:
1. [ ] _______________
2. [ ] _______________
3. [ ] _______________

**新功能需求**:
1. [ ] _______________
2. [ ] _______________
3. [ ] _______________

---

## 🚀 測試完成後的下一步

根據測試結果，可以選擇以下發展方向:

1. **Phase 3A-2**: 學習軌跡分析、性能預測功能
2. **UI/UX 優化**: 根據測試反饋改善使用者體驗
3. **效能調優**: 針對發現的效能瓶頸進行優化
4. **功能擴展**: 基於需求增加新功能模組
5. **安全強化**: 加強系統安全性和數據保護

測試愉快！🎯